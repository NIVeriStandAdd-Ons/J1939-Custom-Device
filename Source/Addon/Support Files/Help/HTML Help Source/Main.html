<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Style-Type" content="text/css">
		<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
		<title>J1939 Custom Device</title>
		<link rel="STYLESHEET" type="text/css" href="css/VSsystemexplorer.css">
		<script src="common.js" type="text/javascript"></script><script src="js/expandable_tree.js" type="text/javascript"></script>
		<link rel="STYLESHEET" type="text/css" href="css/expandable_tree.css">
		<script src="launchhelp.js" type="text/javascript"></script><script src="js/dynamicjumps.js" type="text/javascript"></script>
	</head>
<body>
	<noscript>
		<p class="Body">JavaScript is disabled. <a href="veristandmerge.chm::/JavaScript_Disabled.html">Details</a></p>
		<hr width="100%" noshade>
	</noscript>
<h1>J1939 Custom Device</h1>
<p class="Body">This <strong>J1939 Custom Device</strong> provides the ability to monitor and communicate with devices on a J1939 network.  Specifically, reading and writing J1939 frames (including frames over 8 bytes), reading active and previously active trouble codes (DM1 & DM2), clearing active and previously active trouble codes (DM3 & DM11), claiming and caching J1939 device addresses, sending J1939 requests, and generating raw frames on the bus.  The J1939 parameters to read or write are imported from a dbc, ncd, or fibex database.  They are made avaiable to the rest of the VeriStand test system as scaled channels (EU).</p>
<p>Note: Using this custom device requires one CAN port per instance.  This port cannot be shared with anything else.  Only NI XNET devices are supported.</p>
<h2>What do you want to do?</h2>
<h3>Import database</h3>
<p class="Body">Upon adding the custom device, the user is forced to select a database to import.  From this database, any number of J1939 parameters can be selected for acquisition or gerneration.  To select these signals, right click on <strong>Single Point</strong>, <strong>Cylic</strong> or <strong>Event Triggered</strong> repectively and select <strong>Import Frames</strong>.  Databases can only be selected upon adding a custom device and cannot be editted after the device has been created.</p>
<h3>Set CAN Port</h3>
<p class="Body">Select the CAN port that will be connected to your J1939 network from the <strong>XNET CAN Port</strong> field.  Note: Using this custom device requires one CAN port per instance.  This port cannot be shared with anything else.  Only NI XNET devices are supported.</p>
<h3>Set Baud Rate</h3>
<p class="Body">Set the J1939 network baud rate in the <strong>Baud Rate</strong> field.  Typical J1939 baud rates are 250 and 500 kHz.</p>
<h3>Set Incoming Decimation</h3>
<p class="Body">Incoming decimation sets the decimation from the Primary Control Loop (PCL) at which data is read from the CAN port.  Set the <strong>Incoming Decimation</strong> field.</p>
<h3>Set Outgoing Decimation</h3>
<p class="Body">Outgoing decimation sets the decimation from the Primary Control Loop (PCL) at which data is written to the CAN port.  Set the <strong>Outgoing Decimation</strong> field.</p>
<h3>Set XNET Async Read Rate (Hz)</h3>
<p class="Body">XNET Async Read Rate controls how often XNET Read VI is called. Setting a higher value prevents buffer overflown error but consumes more CPU resource. The maximum value is 1000Hz. Set the rate to 0 will force XNET Read VI to run as fast as possible. Set the <strong>XNET Async Read Rate (Hz)</strong> field.</p>
<h3>NI 986x Support for CompactRIO (Pharlap targets only)</h3>
This add-on supports using the NI 986x devices with CompactRIO (Pharlap OS only).  To do so, you need to use one of the included bitfiles or build your own.   Set the <strong>Enable Bitfile</strong> field to True.  Set the <strong>RIO Device</strong> field number (typically 0) to match your CompactRIO configuration.   Navigate to the fpga bitfile through the <strong>Bitfile Path</strong> field.  Note: A pre-compiled bitfile for a cRIO 9082 with a NI 9862 module in slot 8 has been included in VeriStand Public Documents folder at Custom Devices\J1939 Custom Device\FPGA Bitfiles.  The source code used for creating this bitfile is included as a template for building other bitfiles.  Notice that all other slots (1 - 7) are filled with a scan engine cRIO module (the specific module number doesn't matter) for use with the Scan Engine add-on.</p>
</body>
</html> 